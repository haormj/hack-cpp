## 智能指针

### 理解

- 在之前的测试中，发现所有通过new分配的内存，都需要通过delete进行删除，这个其实挺麻烦的，如果程序员忘记调用delete那么直接就导致内存泄露了
- 为了实现自动释放new出来的内存，也就是不用用户手动delete，标准库 memory 中提供了 unique_ptr，在使用上与指针是相同的
    - 不用自己释放这个内存，智能指针内部会进行管理
    - 创建智能指正的时候，就不通过new的方式，可以通过工厂函数 make
- unique_ptr 禁用了拷贝赋值操作符，也就是不允许从其他地方接口赋值
- 其实unique_ptr的初衷就是这个对象智能指向一块内存，不能修改指向，也不需要用户手动释放内存
- 实际上我们创建一个变量，在函数中传递的时候，还是需要赋值的，从而在大部分场景下是需要一个可以共享的智能指针
- shared_ptr 这个指针可以被赋值，可以在一个函数中定义个shared_ptr，然后传递给另外一个函数，当然是通过值传递的方式
- 不过shared_ptr有循环引用的问题，两个指针互相指之后，每个人的引用数量都变为二，所以就不能被释放了